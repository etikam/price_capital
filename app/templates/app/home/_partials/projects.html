{% load static %}
{% load filters %}

<div class="text-center mx-auto pb-5 wow fadeInUp" data-wow-delay="0.2s" style="max-width: 800px;">
    <h4 class="text-primary">Projets Soumis</h4>
    <h1 class="display-5 mb-4">Découvrez Nos Projets Soumis</h1>
</div>

{% include 'app/home/_partials/project_filters.html' %}

<div class="container-fluid service pb-5">
    <div class="container pb-5">
        <div class="row g-4">
            {% for project in page_obj %}
            <div class="col-md-6 col-lg-4 wow fadeInUp project-item" data-wow-delay="0.2s"
                data-category="{{ project.category }}" data-budget="{{ project.budget }}"
                data-status="{{ project.status }}">
                <div class="service-item">
                    <div class="service-img">
                        <img src="{% static 'img/service-1.jpg' %}" class="img-fluid rounded-top w-100" alt="Image" />
                    </div>
                    <div class="rounded-bottom p-4">
                        <a href="#" class="h4 d-inline-block mb-4">{{ project.title }}</a>
                        <p class="mb-4">{{ project.summary|slice:":200" }}{% if project.summary|length > 200 %}...{% endif %}</p>


                        <!-- Barre de Progression -->
                        <div class="progress mb-3">
                            <div class="progress-bar" role="progressbar" style="width: {{ project.progress }}%"
                                aria-valuenow="{{ project.current_funding }}" aria-valuemin="0"
                                aria-valuemax="{{ project.goal }}">
                                {{ project.progress }}% Financé
                            </div>
                        </div>




                        <p class="text-center">{{ project.funds_collected }} / {{ project.goal }} GNF collectés</p>

                        <a class="btn btn-primary rounded-pill py-2 px-4" href="#">Voir Détails</a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<!-- Pagination -->
<div class="d-flex justify-content-center mt-4">
    <div class="pagination">
        <span class="page-item">
            {% if page_obj.has_previous %}
            <a class="page-link" href="?page=1">&laquo; Première</a>
            <a class="page-link" href="?page={{ page_obj.previous_page_number }}">Précédente</a>
            {% endif %}
        </span>
        <span class="page-item">
            {% for num in page_obj.paginator.page_range %}
            {% if page_obj.number == num %}
            <a class="page-link active" href="?page={{ num }}">{{ num }}</a>
            {% else %}
            <a class="page-link" href="?page={{ num }}">{{ num }}</a>
            {% endif %}
            {% endfor %}
        </span>
        <span class="page-item">
            {% if page_obj.has_next %}
            <a class="page-link" href="?page={{ page_obj.next_page_number }}">Suivante</a>
            <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}">Dernière &raquo;</a>
            {% endif %}
        </span>
    </div>
</div>